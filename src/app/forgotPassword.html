<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>QUBS - Reset Password</title>
	<link media="all" rel="stylesheet" href="css/main.css">
	<link media="all" rel="stylesheet" href="css/qubs.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
	<link rel="icon" href="favicon.ico" type="image/x-icon">

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	
	<script>
		window.jQuery || document.write('<script src="js/jquery-1.12.4.min.js"><\/script>')
	</script>
	<script type="text/javascript" src="js/jquery.main.js" defer></script>
	
</head>

<body>
	<div id="wrapper" class="login-page">
		<form id="login-form" class="login-form form-validation">
			<div class="logo">
				<a href=""><img src="images/logo.svg" alt="QUBS"></a>
			</div>

			<div class="sk-folding-cube" id="progress">
				<div class="sk-cube1 sk-cube"></div>
				<div class="sk-cube2 sk-cube"></div>
				<div class="sk-cube4 sk-cube"></div>
				<div class="sk-cube3 sk-cube"></div>
			</div>


            <div class="unable" id="info" style="visibility: hidden;">
                <h2 id="msg">Unable to Sign in</h2>
            </div>
      
			<div id="resetMail">
                <div class="form-group form-material floating">
                    <input type="email" id="email" class="form-control" name="email" placeholder="Email"/>
                   
                </div>
                <button type="submit" id="login-button" class="btn btn-primary btn-block btn-lg margin-top-40">Reset Your Password</button>
            </div>
            


            <div id="confirmCode" style="display:none">

                <div class="form-group form-material floating">
                    <input type="text" id="confCode" class="form-control" name="confCode" placeholder="Confirmation Code"/>
                    <!-- <label class="floating-label">Confirmation Code</label> -->
                </div>

                <div class="form-group form-material floating">
                    <input type="text" id="newPassword" class="form-control" name="newPassword" placeholder="New Password"/>
                    <!-- <label class="floating-label">New Password</label> -->
                </div>

                <button type="submit" id="conf-button" class="btn btn-primary btn-block btn-lg margin-top-40">Confirm</button>
            </div>



			
			<p>&copy; 2017 <a href="index.html">QUBS</a></p>
			<!--<a href="#new-password-popup" class="btn lightbox">ADD</a> -->


		</form>

	</div>

	<!-- inline lightbox structure example -->
	<div class="popup-holder">

		<form id="new-password-popup" class="lightbox form-popup form-validation">
			<h3>Create new password</h3>
			<div class="form-group">
				<label for="new-passward">New password</label>
				<input type="password" id="password1" data-required="true" data-type="password">
				<span class="help-text">This field is required"</span>
			</div>
			<div class="form-group">
				<label for="confirm-password">Confirm Password</label>
				<input type="password" id="password2" data-required="true" data-type="password">
				<span class="help-text">This field is required</span>
			</div>
			<div>
				<span class="help-text" id="passinfo"></span>
			</div>
			<button type="submit" class="btn blue" id="new-password-save-button">Save</button>
		</form>
	</div>


	<!-- include aws -->
	<script type="text/javascript" src="js/aws/aws-cognito-sdk.min.js"></script>
	<script type="text/javascript" src="js/aws/amazon-cognito-identity.min.js"></script>


	<script type="text/javascript" src="js/jquery.main.js" defer></script>
	<script type="text/javascript" src="js/qubs/login.js"></script>

    <script type="text/javascript" src="js/qubs/resetPassword.js"></script>
   




    <script>
        

        var email = document.getElementById('email');
        var loginButton = document.getElementById('login-button');
        var info = document.getElementById('info');
        loginButton.addEventListener('click', resetPwd);

        var confCode = document.getElementById('confCode');
        var newPassword = document.getElementById('newPassword');
        var confButton = document.getElementById('conf-button');
        confButton.addEventListener('click', verifyCode);

        var resetDiv = document.getElementById('resetMail');
        var confDiv = document.getElementById('confirmCode');

        var progress = document.getElementById('progress');

        function resetPwd(e) {
            e.preventDefault();
            resetPassword(email.value, info, confCode, newPassword, confButton, resetDiv, confDiv, progress);
        }

        function verifyCode(e) {
            e.preventDefault();
            verify(email.value, confCode, newPassword, resetDiv, confDiv, progress);
        }
    </script>
</body>

</html>